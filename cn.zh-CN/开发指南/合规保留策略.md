# 合规保留策略 {#concept_lnj_4rl_cfb .concept}

对象存储OSS支持WORM特性，允许用户以“不可删除、不可篡改”方式保存和使用数据，符合美国证券交易委员会（SEC）和金融业监管局（FINRA）的合规要求。

**说明：** 

-   合规保留策略正在公测中，您可以联系[售后技术支持](https://selfservice.console.aliyun.com/ticket/createIndex)申请试用此功能。
-   OSS目前仅支持针对Bucket级别设置合规保留策略。
-   OSS是目前国内唯一通过Cohasset Associates审计认证的云服务，可满足严格的电子记录保留要求，例如EC Rule 17a-4（f）、FINRA 4511、 CFTC 1.31等合规要求。详情请参见 [OSS Cohasset Assessment Report](http://gosspublic.alicdn.com/OSSCohassetAssessmentReport.pdf)。

OSS提供强合规策略，用户可针对存储空间（Bucket）设置基于时间的合规保留策略。当策略锁定后，用户可以在Bucket中上传和读取文件（Object），但是在Object的保留时间到期之前，任何用户都无法删除Object和策略。Object的保留时间到期后，才可以删除Object。OSS支持的WORM特性，适用于金融、保险、医疗、证券等行业。您可以基于OSS搭建“云上数据合规存储空间”。

**说明：** Bucket内的Object在合规保留策略生效期间，可通过[设置生命周期规则](cn.zh-CN/开发指南/文件生命周期/管理文件生命周期.md#)进行存储类型转化，在保证合规性的前提下，降低存储成本。

## 操作方式 {#section_gq3_zz5_cfb .section}

控制台：[设置合规保留策略](../../../../cn.zh-CN/控制台用户指南/管理存储空间/设置合规保留策略.md#)

## 规则说明 {#section_nk2_fz5_cfb .section}

OSS允许添加一条基于时间的合规保留策略，保护周期为1天到70年。

假设您在2013年6月1日创建一个名为examplebucket的Bucket，并且在不同时间上传了file1.txt、file2.txt、file3.txt三个Object。随后，在2014年7月1日创建了保护周期为5年的合规保留策略。有关这三个Object的具体上传时间以及对应的Object到期时间如下：

|Object名称|上传时间|Object到期时间|
|:-------|:---|:---------|
|file1.txt|2013年6月1日|2018年5月31日|
|file2.txt|2014年7月1日|2019年6月30日|
|file3.txt|2018年9月30日|2023年9月29日|

-   生效规则

    当基于时间的合规保留策略创建后，该策略默认处于“InProgress”状态，且该状态的有效期为 24 小时。在有效期24小时内，此策略对应的Bucket资源处于保护状态。

    -   启动合规保留策略24小时内：若该策略未提交锁定，则Bucket所有者以及授权用户可以删除该策略；若该保留策略已提交锁定，则不允许删除该策略，且无法缩短策略保护周期，仅可以延长保护周期。
    -   启动合规保留策略24小时后：若超过24小时该保留策略未提交锁定，则该策略自动失效。
    -   Bucket内的数据处于被保护状态时，若您尝试删除或修改这些数据，OSS API将返回`409 FileImmutable`的错误信息。
-   删除规则
    -   基于时间的合规保留策略是Bucket的一种Metadata属性。当删除某个Bucket时，该Bucket对应的合规保留策略以及访问策略也会被删除。因此当Bucket为空时，Bucket的所有者可以删除该Bucket，从而间接删除该Bucket的保留策略。
    -   启动保留策略24小时内，若该保留策略未提交锁定，则Bucket所有者以及授权用户可以删除该策略。
    -   若Bucket内有文件处于保护周期内，那么您将无法删除保留策略，同时也无法删除Bucket。

## 常见问题 {#section_7vh_26q_rp3 .section}

-   合规保留策略的优势

    合规保留策略可提供数据合规存储，数据在合规保留策略保护周期内，任何用户都不能删除和修改。而通过RAM policy和Bucket Policy保护的数据，则存在被修改和删除可能。

-   什么情况下需要配置合规保留策略

    您需要长期存储且不允许修改或删除的重要数据，如医疗档案、技术文件、合同文书等，可以存放在指定的Bucket内，并通过开启合规保留策略保护您的重要数据。

-   是否支持针对Object设置合规保留策略

    目前仅支持针对Bucket设置保留策略，不支持针对目录以及单个对象设置合规保留策略。

-   如何删除已开启合规保留策略的Bucket
    -   若该Bucket内未存储文件，可以直接删除该Bucket。
    -   若该Bucket内已存储文件，且所有文件均已过了保护期，删除该Bucket会提示失败。此时，您可以先删除该Bucket内所有文件，再删除Bucket。
    -   若该Bucket内已存储文件，且还有文件处于保护期内，无法删除该Bucket。
-   如果OSS欠费，但仍有文件处于合规保留策略的保护期内，这些文件会被保留么

    在未付款的情况下，阿里云会根据您签署的合同条款和条件，应用对应的数据保留策略。

-   授权的子账号是否可以设置合规保留策略

    合规保留策略相关API接口已全部对外开放，并且相关API操作已支持接入RAM policy。通过RAM Policy授权的子账号可以通过控制台、API、SDK等方式创建、删除合规保留策略。


